<h1>Async Custom Validator (Validação Customizada Assíncrona)</h1>

<form #form="ngForm">
  <input
    type="text"
    name="nome"
    ngModel
    #nomeInputControl="ngModel"
    [ngModelOptions]="{ updateOn: 'blur'}"
    placeholder="Digite o nome"
    appUserNameValidator
  >

  <div *ngIf="nomeInputControl.dirty">
    <p
      *ngIf="nomeInputControl.pending"
      style="color: orange;"
    >Verificando...</p>


    <p
      *ngIf="!nomeInputControl.pending && nomeInputControl.valid && !nomeInputControl.hasError('invalidUserName')"
      style="color: green;"
    >Usuário existente.</p>

    <p
      *ngIf="!nomeInputControl.pending && nomeInputControl.invalid && nomeInputControl.hasError('invalidUserName')"
      style="color: red;"
    >Usuário inexistente.</p>
  </div>

  <p>Válido: {{ nomeInputControl.valid }}</p>
  <p>Touched: {{ nomeInputControl.touched }}</p>
  <p>Sujo: {{ nomeInputControl.dirty }}</p>
  <p>Pendente: {{ nomeInputControl.pending }}</p>
</form>
